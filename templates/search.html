{% extends "base.html" %}
{% block title %}Search{% endblock %}

{% block content %}
<h1>Search Recipes</h1>

<form method="GET" action="{{ url_for(demo_route if demo_enabled else 'search_safe') }}">
  <input type="text" name="q" value="{{ request.args.get('q','') }}" placeholder="Search by title">
  <button type="submit">Search</button>
</form>

{% if demo_enabled and demo_route == 'search_vuln' %}
  <div class="warning">
    <strong>Demo mode:</strong> vulnerable search is enabled (local demo only).
  </div>
{% endif %}

{% if rows %}
  <ul class="results">
    {% for r in rows %}
      <li>
        <a href="{{ url_for('view_recipe', recipe_id=r.id) }}">{{ r.title }}</a>
        <p>{{ r.description }}</p>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No results</p>
{% endif %}
{% endblock %}
